// HashRouter.js Library for hash-based routing.
// https://github.com/ahabra/hash-router
// Copyright 2021 (C) Abdul Habra. Version 0.0.2.
// Apache License Version 2.0


var HashRouter=(()=>{var b=Object.defineProperty;var y=(t,r)=>{for(var e in r)b(t,e,{get:r[e],enumerable:!0})};var v={};y(v,{createRouter:()=>m});function l(t,r,e,n){return t?n?t.toLowerCase().indexOf(r.toLowerCase(),e):t.indexOf(r,e):-1}function c(t,r){return!r||!t?-1:t.split("").findIndex(r)}function h(t,r){if(!r||!t)return-1;let e=t.split("");for(let n=e.length;n>=0;--n)if(r(e[n]))return n;return-1}function g(t,r,e){if(!r)return t;let n=l(t,r,0,e);return n<0?"":t.substring(n+r.length)}function p(t,r,e){if(!r)return"";let n=l(t,r,0,e);return n<0?t:t.substring(0,n)}function s(t){return t=g(t,"#"),u(t)}function u(t){let r=i=>i!=="/"&&i!=="#",e=c(t,r),n=h(t,r);return t.substring(e,n)}var f=class{constructor(r){this.parts=S(r)}isMatch(r,e={}){let n=d(r);if(this.parts.length!==n.length)return!1;for(let i=0;i<n.length;i++){let o=this.parts[i],a=n[i];if(!U(o,a))return!1;o.type==="param"&&(e[o.value]=a)}return!0}};function S(t){return d(t).map(r=>P(r))}function d(t){return u(t).split("/").map(r=>r.trim()).filter(r=>r.length>0)}function P(t){if(t.startsWith(":"))return{type:"param",value:t.substring(1)};if(t.startsWith("[")&&t.endsWith("]")){let r=t.substring(1,t.length-1);return{type:"regex",value:new RegExp(r)}}return{type:"string",value:t}}function U(t,r){return t.type==="param"?!0:t.type==="string"?r===t.value:t.type==="regex"?t.value.test(r):!1}function m(){return new x}var x=class{constructor(){this.routes=[];let r=n=>w(n,this.routes),e=n=>w(n,this.routes,!0);window.addEventListener("hashchange",r,!1),window.addEventListener("load",e,!1)}add(r,e){this.routes.push({route:new f(r),handler:e})}go(r){r="#"+u(r);let n=p(window.location.href,"#")+r;window.history.pushState(null,null,r),window.location.href=n}};function w(t,r,e=!1){let n=C(t,e);if(!n)return;let i={},o=L(r,n,i);o&&o(n,i)}function C(t,r){if(r)return s(t.target.location.href);let e=s(t.oldURL),n=s(t.newURL);return e===n?"":n}function L(t,r,e){let n=t.find(i=>i.route.isMatch(r,e));return n?n.handler:!1}return v;})();
